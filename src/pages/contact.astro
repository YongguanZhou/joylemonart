---
import BaseLayout from "../layouts/BaseLayout.astro";
import { SITE } from "../site";

const raw = SITE.contact;

// 兼容你 site.ts 里带前缀的值
const address = raw.address.replace(/^\s*Address:\s*/i, "").trim();
const email = raw.email.replace(/^\s*E-?mail:\s*/i, "").trim();
const phone = raw.phone.replace(/^\s*Tel:\s*/i, "").trim();

const telHref = "+1" + phone.replace(/\D/g, "");
const mapSrc = `https://www.google.com/maps?q=${encodeURIComponent(address)}&output=embed`;
---

<BaseLayout title={`Contact | ${SITE.title}`} description={SITE.description}>
  <main class="page-home">
    <section
      class="w-1-c"
      style="
        max-width: 1300px;
        margin: 0 auto;
        padding: 28px 12px 36px;
      "
    >
      <!-- ✅ 两栏布局：用 inline 写死，避免任何全局 CSS 干扰 -->
      <div
        style="
          display: grid;
          grid-template-columns: 0.9fr 1.1fr;
          gap: 36px;
          align-items: start;
        "
      >
        <!-- 左侧：联系方式 -->
        <div>
          <h1
            style="
              margin: 0 0 10px;
              font-size: 30px;
              font-weight: 700;
              letter-spacing: 1px;
            "
          >
            联系我们
          </h1>

          <p style="margin: 0 0 22px; font-size: 20px; font-weight: 600;">
             
          </p>

          <div style="margin: 14px 0;">
            <div style="font-size: 22px; font-weight: 800; margin-bottom: 6px;">E-mail:</div>
            <div style="font-size: 22px; line-height: 1.35;">
              <a href={`mailto:${email}`} style="color: inherit; text-decoration: none;">{email}</a>
            </div>
          </div>

          <div style="margin: 14px 0;">
            <div style="font-size: 22px; font-weight: 800; margin-bottom: 6px;">Tel:</div>
            <div style="font-size: 22px; line-height: 1.35;">
              <a href={`tel:${telHref}`} style="color: inherit; text-decoration: none;">{phone}</a>
            </div>
          </div>

          <div style="margin: 14px 0;">
            <div style="font-size: 22px; font-weight: 800; margin-bottom: 6px;">Address:</div>
            <div style="font-size: 22px; line-height: 1.35;">{address}</div>
          </div>
        </div>

        <!-- 右侧：地图（强制占满右侧列） -->
        <div style="width: 100%; min-width: 0;">
          <div
            style="
              width: 100%;
              height: 520px;
              border-radius: 12px;
              overflow: hidden;
              border: 1px solid rgba(0,0,0,.12);
              background: #fff;
              position: relative;
            "
          >
            <iframe
              src={mapSrc}
              title="Google Map"
              loading="lazy"
              referrerpolicy="no-referrer-when-downgrade"
              allowfullscreen
              style="
                position: absolute;
                inset: 0;
                width: 100%;
                height: 100%;
                border: 0;
                display: block;
                max-width: none;
                transform: none;
              "
            ></iframe>
          </div>
        </div>
      </div>

      <!-- 手机端变一列 -->
      <style>
        {`
        @media (max-width: 860px){
          section > div{
            grid-template-columns: 1fr !important;
            gap: 18px !important;
          }
        }
        `}
      </style>
    </section>
  </main>
</BaseLayout>
